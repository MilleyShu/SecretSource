(function(b){var a="secretSource";b[a]=function(f,c){var d=b(f),h=d.data(a),g,e;if(h){return h}c=b.extend({},b[a].defaultOptions,c);g=b[a].getSource(d,c);e=b[a].wrap(d,g,c);e.insertAfter(d);h={original:d,source:g,display:e};d.data(a,h);return h};b[a].getSource=function(d,c){var e=c.includeTag?d[0].outerHTML:e=d.html();if(c.fixWhitespace){e=b[a].fixWhitespace(d,e,c)}return e};b[a].fixWhitespace=function(d,e,c){e=b[a].fixWhitespace.trim(d,e,c);e=b[a].fixWhitespace.fixIndent(d,e,c);return e},b[a].fixWhitespace.trim=function(d,e,c){return e.replace(/^\s*\n|\n\s*$/g,"")},b[a].fixWhitespace.fixIndent=function(d,g,c){if(c.includeTag){var i=d.parent();if(i.length===0){return g}i.get(0).normalize();var f=d.get(0).previousSibling;if(!f||f.nodeType!==Node.TEXT_NODE){return g}var e=f.nodeValue.match(/\n\r?([ \t]+)$/);if(!e){return g}return g.replace(new RegExp("^"+e[1],"mg"),"")}else{var h=g.match(/^\s+/);if(!h){return g}return g.replace(new RegExp("^"+h[0],"mg"),"")}},b[a].wrap=function(e,g,d){var h=b("
").addClass(d.className),c=b("").appendTo(h),f=e.data("language")||e.attr("type")||"";c.text(g);if(f){f="language-"+f.replace(/^.*\/(.*)$/,"$1");c.addClass(f)}return h};b[a].defaultOptions={className:"secret-source",includeTag:false,fixWhitespace:true};b.fn[a]=function(c){return this.map(function(){var d=b[a](this,c);return d.display})}})(jQuery);
