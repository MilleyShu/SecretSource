(function(a){"use strict";var b="secretSource";a[b]=function(c,d){var e=a(c),f=e.data(b),g,h;if(f)return f;d=a.extend({},a[b].defaultOptions,d);g=a[b].getSource(e,d);h=a[b].wrap(e,g,d);h.insertAfter(e);f={original:e,source:g,display:h};e.data(b,f);return f};a[b].getSource=function(c,d){var e=d.includeTag?c[0].outerHTML:e=c.html();if(d.fixWhitespace){e=a[b].fixWhitespace(c,e,d)}return e};a[b].fixWhitespace=function(c,d,e){d=a[b].fixWhitespace.trim(c,d,e);d=a[b].fixWhitespace.fixIndent(c,d,e);return d},a[b].fixWhitespace.trim=function(a,b,c){return b.replace(/^\s*\n|\n\s*$/g,"")},a[b].fixWhitespace.fixIndent=function(a,b,c){if(c.includeTag){var d=a.parent();if(d.length===0){return b}d.get(0).normalize();var e=a.get(0).previousSibling;if(!e||e.nodeType!==Node.TEXT_NODE){return b}var f=e.nodeValue.match(/\n\r?([ \t]+)$/);if(!f){return b}return b.replace(new RegExp("^"+f[1],"mg"),"")}else{var g=b.match(/^\s+/);if(!g){return b}return b.replace(new RegExp("^"+g[0],"mg"),"")}},a[b].wrap=function(b,c,d){var e=a("<pre>").addClass(d.className),f=a("<code>").appendTo(e),g=b.data("language")||b.attr("type")||"";f.text(c);if(g){g="language-"+g.replace(/^.*\/(.*)$/,"$1");f.addClass(g)}return e};a[b].defaultOptions={className:"secret-source",includeTag:false,fixWhitespace:true};a.fn[b]=function(c){return this.map(function(){var d=a[b](this,c);return d.display})}})(jQuery)
